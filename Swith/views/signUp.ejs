<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>StudyWITH</title>
        <link rel="icon" href="../swithlogo.png" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
        <link rel="stylesheet" href="/public/css/signUp.css" />
        <!-- Axios -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <script>
            // function userProfile() {
            //     var form = document.getElementById("profile"); 
            //     axios({
            //         method: "post",
            //         url: "http://localhost:8000/user/signup/upload",
            //         headers: {
            //             'Content-Type': 'multipart/form-data'
            //         },
            //     }).then((req) => { 
            //         return req.data;
            //     }).then((data) => {
            //         if (data.success == true) {
            //             console.log(data.user_image);
            //         }
            //     });
            // }

            // function idCheck() {
            //     var form = document.getElementById("signup_form");
            //     axios({
            //         method: "post",
            //         url: "http://localhost:8000/user/signup/isId",
            //         data: {
            //             user_id: form.id.value
            //         }
            //     }).then((req) => { 
            //         return req.data;
            //     }).then((data) => {
            //         if (data.checkid == true) {
            //             var button = document.getElementById("id-check"); 
            //             button.innerHTML = "ÏÇ¨Ïö©<br>Í∞ÄÎä•";
            //             // button.disabled = true;
            //         } else {
            //             var button = document.getElementById("id-check"); 
            //             button.innerHTML = "Î∂àÍ∞ÄÎä•<br>Îã§ÏãúÌôïÏù∏";
            //         }
            //     });
            // }

            function checkID( obj ){
                //ÌîÑÎ°†Ìä∏Î°ú ÌôïÏù∏ÌïòÎäî
                if ( obj.value == "id2" ) {
                        $("#register_text").css("color", "green");
                        $("#register_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
                        $( "button" ).removeAttr("disabled")
                } else {
                        $("#register_text").css("color", "red");
                        $("#register_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
                        $( "button" ).attr("disabled", "true");
                }
                axios({
                    method: "post",
                    url: "http://localhost:8080/user/overlap",
                    data: {
                        id: obj.value,
                    }
                }).then((rep) => {
                    return rep.data;
                }).then((data) => {
                    if ( data ) {
                        $("#login_text").css("color", "green");
                        $("#login_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
                        $( "button" ).removeAttr("disabled")
                    } else {
                        $("#login_text").css("color", "red");
                        $("#login_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
                        $( "button" ).attr("disabled", "true");
                    }
                });
            }

            function nicknameCheck() {
                var form = document.getElementById("signup_form");
                axios({
                    method: "post",
                    url: "http://localhost:8000/user/signup/isName",
                    data: {
                        user_name: form.nickname.value
                    }
                }).then((req) => { 
                    return req.data;
                }).then((data) => {
                    if (data.checkname == true) {
                        var button = document.getElementById("nickname-check"); 
                        button.innerHTML = "ÏÇ¨Ïö©<br>Í∞ÄÎä•";
                        // button.disabled = true;   
                    } else {
                        var button = document.getElementById("nickname-check"); 
                        button.innerHTML = "Î∂àÍ∞ÄÎä•<br>Îã§ÏãúÏãúÎèÑ";
                    }
                });
            }

            function pwCheck() {
                if(document.getElementById('pw').value !='' && document.getElementById('pwConfirm').value!=''){
                    if(document.getElementById('pw').value==document.getElementById('pwConfirm').value){
                        document.getElementById('check').innerHTML='ÎπÑÎ∞ÄÎ≤àÌò∏ ÏùºÏπòü•∞'
                        document.getElementById('check').style.color='rgb(54, 54, 255)';
                    }
                    else{
                        document.getElementById('check').innerHTML='ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§';
                        document.getElementById('check').style.color='rgb(255, 89, 89)';
                    }
                }
            }

            function signup() {
                var form = document.getElementById("signup_form");
                axios({
                    method:'post',
                    url: "http://localhost:8000/user/signup",
                    data: {
                        user_id: form.id.value,
                        user_name: form.nickname.value,
                        user_password: form.password.value,
                        hint: form.hint.value,
                        hint_answer: form.hintanswer.value,
                        user_email: form.email.value,
                        category1: form.firstField.value,
                        category2: form.secondField.value,
                        category3: form.thirdField.value
                    }
                })
                .then((req) => { return req.data;})
                .then((data) => {
                    alert(data);
                })
            }

            function user_login() {
                document.location.href="http://localhost:8000/user/login";
            }

        </script>
    </head>

    <body>
        <div class="container">
            <img src="/public/login/login_image.png" class="signup_background">
            <!-- <div class="siginup_main"> -->
                
                
                <!-- <div id="form_container"> -->
                    <form id="signup_form">
                        <div id="form_background"></div>
                        
                        
                        <div class="user_info">
                            <img src="/public/login/logo.png" width="300px;" class="signup_logo"><br><br><br>

                            
                                <form action="signup/upload" enctype="multipart/form-data" id="img_upload" method="post">
                                    <div class="profile">
                                        <label for="profileImg"><br><br>ÌîÑÎ°úÌïÑ+
                                        <input type="file" id="profileImg" name="profileImg"/>
                                        <button>ÌîÑÎ°úÌïÑ ÏÇ¨Ïö©ÌïòÍ∏∞</button>
                                        <%if(locals.user_image){%>
                                            <img src="<%=user_image%>">
                                            <%} %>
                                        </label>
                                    </div>
                                </form>

                                <br><br>

                                <span class="span_field">ÌöåÏõêÏ†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!</span><br><br>
                                
                                <!-- <div class="idField"> -->
                                <input type="text" name="id" placeholder="ÏïÑÏù¥Îîî" required onkeyup="checkID( this );" class="userid" style="color:white" />
                                <br>
                                <span id="register_text"></span>
                                <!-- <button type="button" id="id-check" onclick="idCheck()">Ï§ëÎ≥µ<br>ÌôïÏù∏</button><br><br> -->
                                <!-- </div> -->

                                <br><br>
        
                                <input type="text" name="nickname" placeholder="ÎãâÎÑ§ÏûÑ" class="nickname" style="color:white" />
                                <!-- <button type="button" id="nickname-check" onclick="nicknameCheck()">Ï§ëÎ≥µ<br>ÌôïÏù∏</button><br><br> -->

                                <br><br>
        
                                <input type="text" name="email" placeholder="Ïù¥Î©îÏùº" class="email"/><br><br>

                                <input type="password" name="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏" onchange="pwCheck()" id="pw" style="color:white" /><br><br>
                                <input type="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏" onchange="pwCheck()" id="pwConfirm" style="color:white" /><br>
                                <span id="check"></span>
                                
                                <br><br><br>
        
                                <span class="span_field">ÎπÑÎ∞ÄÎ≤àÌò∏ ÌûåÌä∏ ÏßàÎ¨∏</span><br><br>
                                    <select name="hint" class="category_hint" style="color:rgb(200, 200, 200)">
                                        <option value="1">Ïñ¥Îäê Ï§ëÌïôÍµê Ï∂úÏã†Ïù∏Í∞ÄÏöî?</option>
                                        <option value="2">Ï¢åÏö∞Î™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</option>
                                        <option value="3">ÌïôÏ∞ΩÏãúÏ†àÏóê Ï¢ãÏïÑÌñàÎçò Í≥ºÎ™©ÏùÄ Î¨¥ÏóáÏù∏Í∞ÄÏöî?</option>
                                    </select>

                                <br><br>
        
                                <input type="text" name="hintanswer" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÌûåÌä∏ Îãµ" class="pwAnswer" style="color:white" />
        
                                <br><br><br>
        
                                <span class="span_field">Í¥ÄÏã¨Î∂ÑÏïº</span><br><br>
                                    <!-- <div class="first">1ÏàúÏúÑ -->
                                            <select name="firstField" class="category">
                                                <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                                <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                                <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                                <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                                <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                                <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                                <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                            </select>
                                    <!-- </div> -->
        
                                    <br><br>
        
                                    <!-- <div class="second">2ÏàúÏúÑ -->
                                            <select name="secondField" class="category">
                                                <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                                <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                                <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                                <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                                <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                                <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                                <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                            </select>
                                    <!-- </div> -->
        
                                    <br><br>
        
                                    <!-- <div class="third">3ÏàúÏúÑ -->
                                            <select name="thirdField" class="category">
                                                <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                                <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                                <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                                <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                                <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                                <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                                <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                            </select>
                                    <!-- </div> -->
        
                                    <br><br><br><br>
        
                                    <button type="button" class="signupBtn" style="color:#FFE19C" onclick="signup();">ÌöåÏõêÍ∞ÄÏûÖ</button>

                                    <br><br><br>
                                    

                                    <span>Ïù¥ÎØ∏ Ïä§ÏúóÏù¥Ïã†Í∞ÄÏöî?</span>&nbsp;
                                    <a href="javascript:void(0);" onclick="user_login(); return false;">Î°úÍ∑∏Ïù∏</a>&nbsp;
                                    <span>ÌïòÎü¨Í∞ÄÍ∏∞</span>
                                </div>
                                <!-- <div class="userLogin"> -->
                                <!-- </div> -->

                            </div>
                        </form>
                    </div>
            </div>
        </div>
    </body>
</html>