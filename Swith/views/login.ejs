<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Swith:로그인</title>
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/public/css/login.css" />




        <script>

            function loginUser() {
                var form = document.getElementById('login_form');
                var result = form.checkValidity();

                if ( !result ) {

                    // //1. 경고메세지
                    // $('.warningLogin').html('아이디,비밀번호를 모두 입력해주세요');
                    // $('.warningLogin').css('color','red');

                    //2. alert창
                    swal('로그인 실패!','아이디와 비밀번호를 모두 입력해주세요.','warning');


                return false;

                }

                axios ({
                    method:'post',
                    url: "http://localhost:8000/user/login",
                    data: {
                        user_id : form.id.value,
                        user_password : form.password.value,
                    }
                })
                .then((req) => { return req.data;})
                .then((data) => {                  
                    if (data == 'True') {
                        document.location.href="http://localhost:8000/swith";
                    }
                    else {
                        console.log("로그인 실패!")
                        $(".warningLogin").html("아이디 또는 비밀번호를 확인해주세요.");
                        $(".warningLogin").css("color","red");
                    }
                })
            }

            function register() {
                document.location.href="http://localhost:8000/user/signup";
            }

            function findPw() {
                document.location.href="http://localhost:8000/user/find";
            }

        </script>
    
    </head>
    <body>
        <thead>
        <nav>
    
        </nav>
        </thead>

            <div class="container">
                <img src="/public/login/login_image.png" class="login_background">
                    <form id="login_form">
                        <div class="form_background"></div>
                        <div class="login_info">
                        <img src="/public/login/logo.png" width="300px;" class="login_logo"><br>
                        <div class="warningLogin"></div><br>
                            <input type="text" id="user" name="id" class="login_form_user" placeholder="아이디" style="color:white" required><br><br>
                            <input type="password" id="pw" name="password"  class="login_form_pw" placeholder="비밀번호" style="color:white" required>
                            <br>

                            <div class="remember"><label for="userid_Remember" style="font-size: 0.7rem;"><input type="checkbox" id="userid_Remember" name="id_remember">&nbsp;아이디를 기억해줘!</label></div>

                            <br>


                            <button type="button" class="loginUser" style="color:#FFE19C" onclick="loginUser();">로그인하기</button>

                            
                            <br><br>

                            <div>

                                <span>아직도 스윗이 아니신가요?</span>&nbsp;
                                <!-- <a href="http://localhost:8000/user/signup" target="_self" onclick="register();" style="color:#4686C2; font-weight:bolder">회원가입</a>&nbsp -->
                                <a href="javascript:void(0);" onclick="register();return false;">회원가입</a>&nbsp;
                                <span>하러가기</span>
                            </div>
                            <br>
                            <div>

                            <!-- <a href="http://localhost:8000/user/find" target="_self" onclick="findPw();" style="color:black; font-weight: bolder;">비밀번호 찾기</a> -->
                            <a href="javascript:void(0);" onclick="findPw();return false;">비밀번호 찾기</a>
                            </div>
                        </div>
                    </form>
                <!-- </div> -->
                </div>

    </body>
</html>