<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyWITH</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/public/css/swiper-bundle.min.css">
  <link rel="stylesheet" href="../public/css/search.css" />

  <!-- swiper -->
  <link rel="stylesheet" href="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.css" />
  <script src="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.js"></script>

  <!-- Axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>



  <script>

    function mainSearch() {
        var form = document.getElementById('search_form');
        var search = $("#search").val();
        axios({
            method: 'get', 
            url: 'http://localhost:8000/swith/search', 
            params : {
                search : search
            }
        })
        .then((req) => {return req.data;})
        .then((data) => {
            if (data == '') {
                alert("Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöîü§î ");
                return
            }
            console.log(data) // Í≤ÄÏÉâÌï¥Ïò® study Ï†ïÎ≥¥Îì§ dataÎ°ú Î∞õÏïÑÏò¥
        })
    }

    function goCategory() {
        document.location.href='http://localhost:8000/swith/search';
    }

    function studySearch() {
        var form = document.getElementById('studySearch_form');
        var search = $("#search").val();


        axios({
            method: 'get', 
            url: 'http://localhost:8000/swith/search', 
            params : {
                search : search
            }
        })
        .then((req) => {return req.data;})
        .then((data) => {
            console.log(data)
            for ( var i = 0; i < data.length; i++ ){
                var html = "<div> Ï†úÎ™© : data.title <br><div> ÎÇ¥Ïö© : data.content </div></div>";
                $("#content").append(html);
            }
        })

    }

  </script>
</head>

<body>
    <div class="search_bar">
        <form id="studySearch_form" method="post">
        <div>
            <div>
                <span>Ïä§ÌÑ∞Îîî Ïù¥Î¶Ñ :</span>
                <input type="text" name="search" id='search' class="search_input" placeholder="Ï∞æÍ≥† ÏûàÎäî Ïä§ÌÑ∞ÎîîÎ•º Í≤ÄÏÉâÌï¥Î≥¥ÏÑ∏Ïöî" style="color:black">
                &nbsp;&nbsp;
                <span>Î™®ÏßëÏù∏Ïõê :</span>
                <input type="radio" name="memberNum">2~3Î™Ö
                <input type="radio" name="memberNum">4~6Î™Ö
                <input type="radio" name="memberNum">7Î™ÖÏù¥ÏÉÅ

                <br><br>
                <div class="form-row">
                    <div class="name">Ïä§ÌÑ∞Îîî Í∏∞Í∞Ñ</div>
                    <ul class="period">
                    <li><div class="value">
                    ÏãúÏûëÏùº: <input type="hidden" name="start_period">
                    <select id="start_year" name="start_year" required>
                        <option>
                            <%for(var i=2022; i<=2050; i++) {%>
                                <option value="<%=i%>"><%=i%></option>
                            <%}%>
                        </option>
                    </select>ÎÖÑ
                    <select id="start_month" name="start_month" required>
                        <option>
                            <%for(var j=1; j<=12; j++) {%>
                                <option value="<%=j%>"><%=j%></option>
                            <%}%>
                        </option>
                    </select>Ïõî
                    <select id="start_day" name="start_day" required>
                        <option>
                            <%for(var k=1; k<=31; k++) {%>
                                <option value="<%=k%>"><%=k%></option>
                            <%}%>
                        </option>
                    </select>Ïùº
                    </div>
                    </li>

                    <li>
                    <div class="value">
                    Ï¢ÖÎ£åÏùº: <input type="hidden" name="end_period">
                    <select id="end_year" name="end_year" required>
                        <option>
                            <%for(var i=2022; i<=2050; i++) {%>
                                <option value="<%=i%>"><%=i%></option>
                            <%}%>
                        </option>
                    </select>ÎÖÑ
                    <select id="end_month" name="end_month" required>
                        <option>
                            <%for(var j=1; j<=12; j++) {%>
                                <option value="<%=j%>"><%=j%></option>
                            <%}%>
                        </option>
                    </select>Ïõî
                    <select id="end_day" name="end_day" required>
                        <option>
                            <%for(var k=1; k<=31; k++) {%>
                                <option value="<%=k%>"><%=k%></option>
                            <%}%>
                        </option>
                    </select>Ïùº
                </li>
            </div>
                <button class="search" name="search_button" style="font-size: 20px;" onclick="studySearch()">üîç</button>
            </div>
        </div>
        </form>
    </div>


        <!-- Í≤åÏãúÎ¨ºÎì±Î°ùÌï† Îïå Îì±Î°ùÌïú Ïù¥ÎØ∏ÏßÄ / Í≤åÏãúÎ¨º Ï†úÎ™© / Ïä§ÌÑ∞ÎîîÍ∏∞Í∞Ñ Î∞õÏïÑÏôÄÏïº Ìï®... -->
    <form method="get" action="">
        <div class = "main-container">
            <div class = "filter-container">
                <div class = "category-head">
                    <ul>
                        <div class = "category-title active" id = "all">
                            <li>Ï†ÑÏ≤¥</li>
                        </div>
                        <div class = "category-title" id = "computer">
                            <li>Ïª¥Ìì®ÌÑ∞/IT</li>
                        </div>
                        <div class = "category-title" id = "language">
                            <li>Ïñ∏Ïñ¥</li>
                        </div>
                        <div class = "category-title" id = "certificate">
                            <li>ÏûêÍ≤©Ï¶ù</li>
                        </div>
                        <div class = "category-title" id = "confirm">
                            <li>Ïù∏Ï¶ù</li>
                        </div>
                        <div class = "category-title" id = "work">
                            <li>Ï∑®ÏóÖ/Ïù¥ÏßÅ</li>
                        </div>
                    </ul>
                </div>
            </form>
                <h2>"<%=search %> " Í≤ÄÏÉâ Í≤∞Í≥ºÏûÖÎãàÎã§.</h2> <br><br>
                <ul>
                    <div class = "feed-collect">
                        <div class = "feed-main-container">
                            <!-- Ïä§ÌÑ∞Îîî Ï†ïÎ≥¥ ÌèºÌÉúÍ∑∏ -->
                            <form id="category-form">
                                <% for(var i=0; i<data.length; i++) {%>
                                    <button class="studys">
                                        <!--  id="studys" -->
                                        <div class = "all business">
                                            <div class = "post-img">
                                                <img src = "/public/group/<%=data[i].study_image %>" alt = "post">
                                                <span class = "category-name"><%=data[i].study_category%></span>
                                                <p><%=data[i].study_id %></p>
                                            </div>
                                            <div class = "post-content">
                                                <h2><%=data[i].study_name%></h2>
                                                <p><%=data[i].study_recruit%></p>
                                            </div>
                                        </div>
                                    </button>
                                        <% } %>
                                    </div>
                            </form>
                    </div>
                </ul>
            </div>
        </div>
        <script>
            // ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌïòÍ∏∞
            var studys = document.getElementsByClassName('studys'); 

            for (const study of studys) {
                study.addEventListener('click', function(obj) {
                    var study_site = obj.currentTarget;
                    // var study_id = document.querySelector(".studys > div > div.post-img > p").innerHTML;
                    // var study_id = $(study_site)
                    
                    
                    // axios ({
                    //     method:'post', 
                    //     url:'http://localhost:8000/swith/search/detailed', 
                    //     data : {
                    //         study_id : study_id
                    //     }
                    // })
                    // .then((req) => {return req.data;})
                    // .then((data) => {
                    //     document.location.href=`http://localhost:8000/feed/detailedPost?user_id=${data.user_id}&study_id=${data.study_id}`
                    // })
                })
            }


            const categoryTitle = document.querySelectorAll('.category-title');
            const allCategoryPosts = document.querySelectorAll('.all');

            for(let i = 0; i < categoryTitle.length; i++){
                categoryTitle[i].addEventListener('click', filterPosts.bind(this, categoryTitle[i]));
            }

            function filterPosts(item){
                changeActivePosition(item);
                for(let i = 0; i < allCategoryPosts.length; i++){
                    if(allCategoryPosts[i].classList.contains(item.attributes.id.value)){
                        allCategoryPosts[i].style.display = "block";
                    } else {
                        allCategoryPosts[i].style.display = "none";
                    }
                }
            }

            function changeActivePosition(activeItem){
                for(let i = 0; i < categoryTitle.length; i++){
                    categoryTitle[i].classList.remove('active');
                }
                activeItem.classList.add('active');
            };
        </script>
        


    <!-- <div class="category-container">
        <div class="category-head"> 
            <ul>
                <div class="category-title" id="all">
                    <li>Ï†ÑÏ≤¥</li>
                </div>
                <div class="category-title" id="all">
                    <li>Ïª¥Ìì®ÌÑ∞/IT</li>
                </div>
                <div class="category-title" id="all">
                    <li>Ïñ∏Ïñ¥</li>
                </div>
                <div class="category-title" id="all">
                    <li>ÏûêÍ≤©Ï¶ù</li>
                </div>
                <div class="category-title" id="all">
                    <li>Ïù∏Ï¶ù</li>
                </div>
                <div class="category-title" id="all">
                    <li>Ï∑®ÏóÖ/Ïù¥ÏßÅ</li>
                </div>
                <div class="category-title" id="all">
                    <li>Í≥µÎ™®Ï†Ñ</li>
                </div>
                <div class="category-title" id="all">
                    <li>Ï∑®ÎØ∏</li>
                </div>
            </ul>
        </div> -->

        <!-- <div class="posts-collector">
            <div class="posts-main-container">
                <div class="post-img">
                    <img src="/public/search/Ï°∞ÌöåÌéòÏù¥ÏßÄ(Ïª¥Ìì®ÌÑ∞).jpeg" alt="feed">
                    <span class="category-name">Ïª¥Ìì®ÌÑ∞/IT</span>
                </div>

                <div class="post-content">
                    <div class="post-content-top"></div>
                </div>
            </div>
        </div> -->




        <!-- <form method="get" action="">
            <h2>"<%=search %> " Í≤ÄÏÉâ Í≤∞Í≥ºÏûÖÎãàÎã§.</h2> <br><br>
            <div class="search_Result">
                <div>
                    <img src="../public/search/computer.jpeg" alt="">
                    <div>
                        <h3><%=data[0].study_name %></h3>
                        <p>Ïä§ÌÑ∞ÎîîÍ∏∞Í∞Ñ</p>
                        <div><%=data[0].study_image %></div>
                    </div>
                </div>
            </div>
        </form> -->




    <!-- <form method="get" action="">
        <input type="text" name="study_id">
    </form> -->


</body>
<script>
    function showDetail( id ){
        var form = new FormData();
        form.append("study_id", id);
        form.method = "get";
        form.action="/d";
        form.submit();
    }
</script>
</html>

