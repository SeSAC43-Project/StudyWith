<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>

    <link rel="stylesheet" href="/public/css/mypage.css" />

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script src="https://kit.fontawesome.com/8132c83a04.js" crossorigin="anonymous"></script>

    <script>
            // ÌöåÏõêÏ†ïÎ≥¥ÏàòÏ†ï / Ï∞∏Ïó¨Ï§ë / Ï∞úÎ™©Î°ù Ïù¥Îèô
            function goModify() {
                document.location.href="http://localhost:8000/user/mypage";
            }
            function goPart() {
                document.location.href="http://localhost:8000/user/mypage/studys";
            }
            function goHeart() {
                document.location.href="http://localhost:8000/user/mypage/likes";
            }
            function goHome() {
            document.location.href="http://localhost:8000/swith";
            }

            // ÎãâÎÑ§ÏûÑ ÌôïÏù∏ Ìèº ÏûëÏÑ±
            function checkNickname( obj ) {
                    axios({
                        method: "post",
                        url: "http://localhost:8000/user/signup/isName",
                        data: {
                            user_name: obj.value,
                        }
                    }).then((req) => { 
                        return req.data;
                    }).then((data) => {
                        console.log(data);
                        if ( data ) {
                            $("#checkNickname_text").css("color", "green");
                            $("#checkNickname_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.");
                            $( "button" ).removeAttr("disabled")
                        } else {
                            $("#checkNickname_text").css("color", "red");
                            $("#checkNickname_text").text("ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäî ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.");
                            $( "button" ).attr("disabled", "true");
                        }
                    });
                }

            /* ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ */
            function pwCheck() {
                if(document.getElementById('pw').value !='' && document.getElementById('pwConfirm').value!=''){
                    if(document.getElementById('pw').value==document.getElementById('pwConfirm').value){
                        document.getElementById('check').innerHTML='ÎπÑÎ∞ÄÎ≤àÌò∏ ÏùºÏπòü•∞'
                        document.getElementById('check').style.color='rgb(54, 54, 255)';
                    }
                    else{
                        document.getElementById('check').innerHTML='ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§';
                        document.getElementById('check').style.color='rgb(255, 89, 89)';
                    }
                }
            }

            // ÌöåÏõêÏ†ïÎ≥¥ ÏàòÏ†ï 
            function info_modify() {
                var form = document.getElementById('modify_info');
                let nickname = $('#nickname').val();
                let email = $('#email').val();
                let pw = $('#pw').val();
                let category1 = $('#category1').val();
                let category2 = $('#category2').val();
                let category3 = $('#category3').val();


                axios({
                    method:'post',
                    url: "http://localhost:8000/user/mypage",
                    data: {
                        user_name : nickname,
                        user_email : email,
                        user_password : pw,
                        category1: category1,
                        category2: category2,
                        category3: category3
                    }
                })
                .then((req) => { return req.data;})
                .then((data) => {
                    alert(data);
                });
            }


    </script>
    

</head>
<body>
    <div class="container">

        <div class="mypage-head"> üòã <%= data[0].user_name %> Îãò ÌôòÏòÅÌï©ÎãàÎã§! üòã
            <button type="button" onclick="goHome()" class="homeBtn">
                <i class="fa-solid fa-house"></i>
            </button>
        </div>

        <div class="menu">
            <div onclick="goModify()">
                <i class="fa-solid fa-user">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage">ÌöåÏõêÏ†ïÎ≥¥ÏàòÏ†ï</a>
                </i>
                <span><i class="fa-solid fa-user">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage">ÌöåÏõêÏ†ïÎ≥¥ÏàòÏ†ï</a>
                </i></span>
            </div>
            <div onclick="goPart()">
                <i class="fa-solid fa-podcast">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage/studys">Ï∞∏Ïó¨Ï§ë</a>
                </i>
                <span><i class="fa-solid fa-podcast">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage/studys">Ï∞∏Ïó¨Ï§ë</a>
                </i></span>
            </div>
            <div onclick="goHeart()">
                <i class="fa-solid fa-heart">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage/likes">Ï∞úÎ™©Î°ù</a>
                </i>
                <span><i class="fa-solid fa-heart">&nbsp;&nbsp;
                    <a href="http://localhost:8000/user/mypage/likes">Ï∞úÎ™©Î°ù</a>
                </i></span>
            </div>
        </div>

        <div class="modify-list">
            <div class="user_info">

                <form id="modify_info">

                    <div class="info-field">
                    <input type="text" id="nickname" name="nickname" placeholder="ÎãâÎÑ§ÏûÑ : <%=data[0].user_name %>" required onkeyup="checkNickname( this );" class="nickname" style="color: black" />
                    <p id="checkNickname_text"></p>

                    <br><br>

                    <input type="text" id="email" name="email" placeholder="Ïù¥Î©îÏùº : <%=data[0].user_email %>" class="email" style="color: black" /><br><br>

                    <input type="password" name="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ : <%=data[0].user_password %>" onchange="pwCheck()" id="pw" style="color: black" /><br><br>
                    <input type="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏" onchange="pwCheck()" id="pwConfirm" style="color: black" /><br>
                    <span id="check"></span>
                    </div>
                    
                    <br><br><br>

                    <span class="span_field">Í¥ÄÏã¨Î∂ÑÏïº</span><br><br>
                    <div class="inte-field">
                        <!-- <div class="first">1ÏàúÏúÑ -->
                                <select name="firstField" class="category" id="category1">
                                    <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                    <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                    <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                    <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                    <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                    <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                    <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                </select>
                        <!-- </div> -->

                        <br><br>

                        <!-- <div class="second">2ÏàúÏúÑ -->
                                <select name="secondField" class="category" id="category2">
                                    <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                    <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                    <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                    <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                    <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                    <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                    <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                </select>
                        <!-- </div> -->

                        <br><br>

                        <!-- <div class="third">3ÏàúÏúÑ -->
                                <select name="thirdField" class="category" id="category3">
                                    <option value="Ïª¥Ìì®ÌÑ∞/IT">Ïª¥Ìì®ÌÑ∞/IT</option>
                                    <option value="Ïñ∏Ïñ¥">Ïñ∏Ïñ¥</option>
                                    <option value="ÏûêÍ≤©Ï¶ù">ÏûêÍ≤©Ï¶ù</option>
                                    <option value="Ïù∏Ï¶ù">Ïù∏Ï¶ù</option>
                                    <option value="Ï∑®ÏóÖ/Ïù¥ÏßÅ">Ï∑®ÏóÖ/Ïù¥ÏßÅ</option>
                                    <option value="Í≥µÎ™®Ï†Ñ">Í≥µÎ™®Ï†Ñ</option>
                                    <option value="Ï∑®ÎØ∏">Ï∑®ÎØ∏</option>
                                </select>
                        <!-- </div> -->

                        <div class="warningDiv"></div>
                        <br><br>
                        
                        
                        <button type="button" class="signupBtn" style="color:#FFE19C" onclick="info_modify();">ÏàòÏ†ïÏôÑÎ£å</button>
                    </div>

                   
                </form>
            </div>
        </div>
    </div>

</body>
</html>