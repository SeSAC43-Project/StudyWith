<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/8132c83a04.js" crossorigin="anonymous"></script>
    <!-- modal -->
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-material-ui/material-ui.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="/public/css/boardPost.css" /> 

    <script>
      function add_Posting() {
        var form = document.getElementById("modify_info");
        var studyData = document.getElementById("study_id").innerText;

            axios({
                method:'post',
                url: "http://localhost:8000/feed/board/write",
                data: {
                    study_id: studyData,
                    title : form.title.value,
                    lounge_contents: form.lounge_contents.value,
                    }
            })
            .then((req) => { return req.data;})
            .then((data) => {
                // console.log(data);
                // console.log(data.result.lounge_id);
                // console.log(data.result);
                document.location.href=`http://localhost:8000/feed/board/detail?lounge_id=${data.result.lounge_id}`;
            })        
        }
      
        function goHome() {
            document.location.href="http://localhost:8000/swith";
            }
        
    </script>
</head>
<body>
    <div class="container">

        <div class="mypage-head"> 😋 <%=study_id %>&nbsp&nbsp님 환영합니다! 😋
            <button type="button" onclick="goHome()" class="homeBtn">
                <i class="fa-solid fa-house"></i>
            </button>
        </div>

        <div class="modify-list">
          <form id="modify_info">
            <div style="display:none" id="study_id"><%=study_id %></div>
              <!-- <div class="input-group">
                <input type="text" id="studyId" value="<%=study_id %>" name="study_id">
              </div> -->

              <div class="input-group">
                <input type="text" id="title" name="title" required>
                <label for="title"><i class="fa-solid fa-paw"></i>&nbsp&nbsp제목</label>
              </div>
              <div class="input-group">
                <textarea id="message" rows="15" name="lounge_contents" required></textarea>
                <label for="message"><i class="fa-solid fa-message"></i>&nbsp&nbsp내용</label>
              </div>
              <button type="button" class="writePost" onclick="add_Posting();"><i class="fas fa-paper-plane"></i>&nbsp&nbsp글쓰기</button>
          </form>
    </div>
</body>
</html>